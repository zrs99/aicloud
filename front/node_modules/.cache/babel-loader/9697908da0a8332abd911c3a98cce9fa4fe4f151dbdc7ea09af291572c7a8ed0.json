{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport * as pdfjsLib from 'pdfjs-dist/build/pdf';\nimport 'pdfjs-dist/web/pdf_viewer.css';\nexport default {\n  __name: 'socketTest',\n  props: {\n    pdfUrl: String // PDF文件URL（支持本地或远程）\n  },\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const props = __props;\n    const pdfContainer = ref(null);\n    const currentPage = ref(1);\n    const totalPages = ref(0);\n    let pdfInstance = null;\n\n    // 初始化PDF\n    const loadPdf = async () => {\n      pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/build/pdf.worker.min.js';\n      const loadingTask = pdfjsLib.getDocument(props.pdfUrl);\n      pdfInstance = await loadingTask.promise;\n      totalPages.value = pdfInstance.numPages;\n      renderPage();\n    };\n\n    // 渲染当前页\n    const renderPage = async () => {\n      const page = await pdfInstance.getPage(currentPage.value);\n      const viewport = page.getViewport({\n        scale: 1.5\n      });\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n      pdfContainer.value.innerHTML = '';\n      pdfContainer.value.appendChild(canvas);\n      await page.render({\n        canvasContext: context,\n        viewport: viewport\n      }).promise;\n    };\n\n    // 翻页控制\n    const prevPage = () => {\n      if (currentPage.value > 1) {\n        currentPage.value--;\n        renderPage();\n      }\n    };\n    const nextPage = () => {\n      if (currentPage.value < totalPages.value) {\n        currentPage.value++;\n        renderPage();\n      }\n    };\n    onMounted(loadPdf);\n    const __returned__ = {\n      props,\n      pdfContainer,\n      currentPage,\n      totalPages,\n      get pdfInstance() {\n        return pdfInstance;\n      },\n      set pdfInstance(v) {\n        pdfInstance = v;\n      },\n      loadPdf,\n      renderPage,\n      prevPage,\n      nextPage,\n      ref,\n      onMounted,\n      get pdfjsLib() {\n        return pdfjsLib;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","pdfjsLib","props","__props","pdfContainer","currentPage","totalPages","pdfInstance","loadPdf","GlobalWorkerOptions","workerSrc","loadingTask","getDocument","pdfUrl","promise","value","numPages","renderPage","page","getPage","viewport","getViewport","scale","canvas","document","createElement","context","getContext","height","width","innerHTML","appendChild","render","canvasContext","prevPage","nextPage"],"sources":["D:/Study/Code/AICloud/front/src/components/socketTest.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div ref=\"pdfContainer\" class=\"pdf-viewer\"></div>\r\n    <div class=\"controls\">\r\n      <button @click=\"prevPage\">上一页</button>\r\n      <span>第 {{ currentPage }} 页 / 共 {{ totalPages }} 页</span>\r\n      <button @click=\"nextPage\">下一页</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from 'vue';\r\nimport * as pdfjsLib from 'pdfjs-dist/build/pdf';\r\nimport 'pdfjs-dist/web/pdf_viewer.css';\r\n\r\nconst props = defineProps({\r\n  pdfUrl: String // PDF文件URL（支持本地或远程）\r\n});\r\n\r\nconst pdfContainer = ref(null);\r\nconst currentPage = ref(1);\r\nconst totalPages = ref(0);\r\nlet pdfInstance = null;\r\n\r\n// 初始化PDF\r\nconst loadPdf = async () => {\r\n  pdfjsLib.GlobalWorkerOptions.workerSrc =\r\n    'https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/build/pdf.worker.min.js';\r\n\r\n  const loadingTask = pdfjsLib.getDocument(props.pdfUrl);\r\n  pdfInstance = await loadingTask.promise;\r\n  totalPages.value = pdfInstance.numPages;\r\n\r\n  renderPage();\r\n};\r\n\r\n// 渲染当前页\r\nconst renderPage = async () => {\r\n  const page = await pdfInstance.getPage(currentPage.value);\r\n  const viewport = page.getViewport({ scale: 1.5 });\r\n\r\n  const canvas = document.createElement('canvas');\r\n  const context = canvas.getContext('2d');\r\n  canvas.height = viewport.height;\r\n  canvas.width = viewport.width;\r\n\r\n  pdfContainer.value.innerHTML = '';\r\n  pdfContainer.value.appendChild(canvas);\r\n\r\n  await page.render({\r\n    canvasContext: context,\r\n    viewport: viewport\r\n  }).promise;\r\n};\r\n\r\n// 翻页控制\r\nconst prevPage = () => {\r\n  if (currentPage.value > 1) {\r\n    currentPage.value--;\r\n    renderPage();\r\n  }\r\n};\r\n\r\nconst nextPage = () => {\r\n  if (currentPage.value < totalPages.value) {\r\n    currentPage.value++;\r\n    renderPage();\r\n  }\r\n};\r\n\r\nonMounted(loadPdf);\r\n</script>\r\n\r\n<style>\r\n.pdf-viewer {\r\n  border: 1px solid #ccc;\r\n  margin-bottom: 10px;\r\n  overflow: auto;\r\n}\r\n.controls {\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n}\r\n</style>\r\n"],"mappings":"AAYA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAK;AACpC,OAAO,KAAKC,QAAQ,MAAM,sBAAsB;AAChD,OAAO,+BAA+B;;;;;;;;;;IAEtC,MAAMC,KAAK,GAAGC,OAEZ;IAEF,MAAMC,YAAY,GAAGL,GAAG,CAAC,IAAI,CAAC;IAC9B,MAAMM,WAAW,GAAGN,GAAG,CAAC,CAAC,CAAC;IAC1B,MAAMO,UAAU,GAAGP,GAAG,CAAC,CAAC,CAAC;IACzB,IAAIQ,WAAW,GAAG,IAAI;;IAEtB;IACA,MAAMC,OAAO,GAAG,MAAAA,CAAA,KAAY;MAC1BP,QAAQ,CAACQ,mBAAmB,CAACC,SAAS,GACpC,yEAAyE;MAE3E,MAAMC,WAAW,GAAGV,QAAQ,CAACW,WAAW,CAACV,KAAK,CAACW,MAAM,CAAC;MACtDN,WAAW,GAAG,MAAMI,WAAW,CAACG,OAAO;MACvCR,UAAU,CAACS,KAAK,GAAGR,WAAW,CAACS,QAAQ;MAEvCC,UAAU,CAAC,CAAC;IACd,CAAC;;IAED;IACA,MAAMA,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,MAAMC,IAAI,GAAG,MAAMX,WAAW,CAACY,OAAO,CAACd,WAAW,CAACU,KAAK,CAAC;MACzD,MAAMK,QAAQ,GAAGF,IAAI,CAACG,WAAW,CAAC;QAAEC,KAAK,EAAE;MAAI,CAAC,CAAC;MAEjD,MAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;MAC/C,MAAMC,OAAO,GAAGH,MAAM,CAACI,UAAU,CAAC,IAAI,CAAC;MACvCJ,MAAM,CAACK,MAAM,GAAGR,QAAQ,CAACQ,MAAM;MAC/BL,MAAM,CAACM,KAAK,GAAGT,QAAQ,CAACS,KAAK;MAE7BzB,YAAY,CAACW,KAAK,CAACe,SAAS,GAAG,EAAE;MACjC1B,YAAY,CAACW,KAAK,CAACgB,WAAW,CAACR,MAAM,CAAC;MAEtC,MAAML,IAAI,CAACc,MAAM,CAAC;QAChBC,aAAa,EAAEP,OAAO;QACtBN,QAAQ,EAAEA;MACZ,CAAC,CAAC,CAACN,OAAO;IACZ,CAAC;;IAED;IACA,MAAMoB,QAAQ,GAAGA,CAAA,KAAM;MACrB,IAAI7B,WAAW,CAACU,KAAK,GAAG,CAAC,EAAE;QACzBV,WAAW,CAACU,KAAK,EAAE;QACnBE,UAAU,CAAC,CAAC;MACd;IACF,CAAC;IAED,MAAMkB,QAAQ,GAAGA,CAAA,KAAM;MACrB,IAAI9B,WAAW,CAACU,KAAK,GAAGT,UAAU,CAACS,KAAK,EAAE;QACxCV,WAAW,CAACU,KAAK,EAAE;QACnBE,UAAU,CAAC,CAAC;MACd;IACF,CAAC;IAEDjB,SAAS,CAACQ,OAAO,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}