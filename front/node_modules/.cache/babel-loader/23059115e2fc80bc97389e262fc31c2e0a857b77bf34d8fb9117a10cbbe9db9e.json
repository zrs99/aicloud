{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref } from 'vue';\nimport axios from 'axios';\n\n// 定义响应式数据\n\nexport default {\n  __name: 'FileUpload',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const file = ref(null);\n    const message = ref('');\n\n    // 处理文件选择\n    const handleFileChange = event => {\n      file.value = event.target.files[0];\n    };\n\n    // 上传文件\n    const uploadFile = async () => {\n      if (!file.value) {\n        message.value = '请选择一个文件';\n        return;\n      }\n      const formData = new FormData();\n      formData.append('file', file.value);\n      formData.append('title', file.value.name);\n      try {\n        const response = await axios.post('http://127.0.0.1:8000/api/upload/', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          },\n          responseType: 'blob' // 接收二进制文件\n        });\n\n        // 创建下载链接\n        const url = window.URL.createObjectURL(new Blob([response.data]));\n        const link = document.createElement('a');\n        link.href = url;\n        link.setAttribute('download', file.value.name);\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        message.value = '文件上传并处理成功！';\n      } catch (error) {\n        message.value = '文件上传失败';\n        console.error('Error uploading file:', error);\n      }\n    };\n    const __returned__ = {\n      file,\n      message,\n      handleFileChange,\n      uploadFile,\n      ref,\n      get axios() {\n        return axios;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","axios","file","message","handleFileChange","event","value","target","files","uploadFile","formData","FormData","append","name","response","post","headers","responseType","url","window","URL","createObjectURL","Blob","data","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","error","console"],"sources":["D:/Study/Code/AICloud/front/src/components/FileUpload.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>文件上传</h1>\r\n    <input type=\"file\" @change=\"handleFileChange\" />\r\n    <button @click=\"uploadFile\">上传</button>\r\n    <p v-if=\"message\">{{ message }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport axios from 'axios';\r\n\r\n// 定义响应式数据\r\nconst file = ref(null);\r\nconst message = ref('');\r\n\r\n// 处理文件选择\r\nconst handleFileChange = (event) => {\r\n  file.value = event.target.files[0];\r\n};\r\n\r\n// 上传文件\r\nconst uploadFile = async () => {\r\n  if (!file.value) {\r\n    message.value = '请选择一个文件';\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('file', file.value);\r\n  formData.append('title', file.value.name);\r\n\r\n  try {\r\n    const response = await axios.post('http://127.0.0.1:8000/api/upload/', formData, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n      responseType: 'blob', // 接收二进制文件\r\n    });\r\n\r\n    // 创建下载链接\r\n    const url = window.URL.createObjectURL(new Blob([response.data]));\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.setAttribute('download', file.value.name);\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n\r\n    message.value = '文件上传并处理成功！';\r\n  } catch (error) {\r\n    message.value = '文件上传失败';\r\n    console.error('Error uploading file:', error);\r\n  }\r\n};\r\n</script>"],"mappings":";;;AAUA,SAASA,GAAG,QAAQ,KAAK;AACzB,OAAOC,KAAK,MAAM,OAAO;;AAEzB;;;;;;;;IACA,MAAMC,IAAI,GAAGF,GAAG,CAAC,IAAI,CAAC;IACtB,MAAMG,OAAO,GAAGH,GAAG,CAAC,EAAE,CAAC;;IAEvB;IACA,MAAMI,gBAAgB,GAAIC,KAAK,IAAK;MAClCH,IAAI,CAACI,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IACpC,CAAC;;IAED;IACA,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI,CAACP,IAAI,CAACI,KAAK,EAAE;QACfH,OAAO,CAACG,KAAK,GAAG,SAAS;QACzB;MACF;MAEA,MAAMI,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEV,IAAI,CAACI,KAAK,CAAC;MACnCI,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEV,IAAI,CAACI,KAAK,CAACO,IAAI,CAAC;MAEzC,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,IAAI,CAAC,mCAAmC,EAAEL,QAAQ,EAAE;UAC/EM,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,YAAY,EAAE,MAAM,CAAE;QACxB,CAAC,CAAC;;QAEF;QACA,MAAMC,GAAG,GAAGC,MAAM,CAACC,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAAC;QACjE,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;QACxCF,IAAI,CAACG,IAAI,GAAGT,GAAG;QACfM,IAAI,CAACI,YAAY,CAAC,UAAU,EAAE1B,IAAI,CAACI,KAAK,CAACO,IAAI,CAAC;QAC9CY,QAAQ,CAACI,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC;QAC/BA,IAAI,CAACO,KAAK,CAAC,CAAC;QACZN,QAAQ,CAACI,IAAI,CAACG,WAAW,CAACR,IAAI,CAAC;QAE/BrB,OAAO,CAACG,KAAK,GAAG,YAAY;MAC9B,CAAC,CAAC,OAAO2B,KAAK,EAAE;QACd9B,OAAO,CAACG,KAAK,GAAG,QAAQ;QACxB4B,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC/C;IACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}